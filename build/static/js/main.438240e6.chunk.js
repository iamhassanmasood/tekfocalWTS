(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{123:function(e,t,a){e.exports=a.p+"static/media/Logo.acb59653.PNG"},162:function(e,t,a){e.exports=a.p+"static/media/Side-img.87df21f4.PNG"},235:function(e,t,a){e.exports=a.p+"static/media/map_icon.2e2e33c5.png"},238:function(e,t,a){e.exports=a.p+"static/media/Registered-Undiscovered.c4f8f220.PNG"},239:function(e,t,a){e.exports=a.p+"static/media/Registered-Discovered.0d881336.PNG"},240:function(e,t,a){e.exports=a.p+"static/media/Unauthorized-Entry.510fa4b6.PNG"},241:function(e,t,a){e.exports=a.p+"static/media/Stolen.71819a20.PNG"},242:function(e,t,a){e.exports=a.p+"static/media/In-Transit.56564a93.PNG"},251:function(e,t,a){e.exports=a.p+"static/media/whiteLogo.b609abe2.PNG"},270:function(e,t,a){e.exports=a(540)},296:function(e,t,a){},534:function(e,t,a){},535:function(e,t,a){},539:function(e,t,a){},540:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),s=a.n(r),o=a(3),c=a(24),i=a(77),m=a(51),d=a(22),u=a(17),p=a(25),g=a(26),h=a(18),f=a(27),E=a(235),v=a.n(E),b="https://wts.cs-satms.com",y=8443,S="api/sites",w="api/regions",N="api/devices",_=(localStorage.getItem("accessToken"),"api/assets"),C="assets_states_report_by_site_id?site_id=",k="o/token",x="bm1Tjsd3awm3k3ZilIsOB3Qz1QbKOrnFfzxUvLgGtjGDswIzK5T7djRTVYNcO3nXOtacq3RtKwM2i8dZBxtkw1Onw3jcj9GVDZUuJ0MPpZJ7CgrWvOKsRu50bJHBpfSn",O="3pXWuFFg18vj3SL46WDCpZ14tFC1Xl9ousG8Z4lu",D="alerts_reporting",A=a(8),P=a.n(A),j=a(78),T=a.n(j),I=a(10),M=a(5);function z(){var e=Object(I.a)(["\n        display: block;\n        width: 100%;\n        /* border: 1px solid #3f4142; */\n        background-color:#1b1b1b;\n        margin-top: 2rem ;\n        color: white;\n        border-radius: 0.1rem;\n        text-indent: 0.8rem;\n"]);return z=function(){return e},e}function B(){var e=Object(I.a)(["\n    padding:0px 5px 0px 5px;\n    color: white;\n    font-size: 14px;\n"]);return B=function(){return e},e}function V(){var e=Object(I.a)([""]);return V=function(){return e},e}function F(){var e=Object(I.a)(["margin-top:5px, margin-bottom:5px"]);return F=function(){return e},e}function R(){var e=Object(I.a)(["padding-top: 9px"]);return R=function(){return e},e}function L(){var e=Object(I.a)([""]);return L=function(){return e},e}function U(){var e=Object(I.a)([""]);return U=function(){return e},e}function J(){var e=Object(I.a)(["\n"]);return J=function(){return e},e}var G=M.default.div(J()),W=M.default.div(U()),Y=M.default.div(L()),H=M.default.div(R()),Z=M.default.div(F()),K=(M.default.br(V()),M.default.span(B())),q=M.default.div(z()),X=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}],Q=a(249),$=a.n(Q),ee=a(250),te=a.n(ee),ae=a(248),ne=a.n(ae),le=(a(296),a(161)),re=a.n(le),se=a(238),oe=a.n(se),ce=a(239),ie=a.n(ce),me=a(240),de=a.n(me),ue=a(241),pe=a.n(ue),ge=a(242),he=a.n(ge),fe=a(587),Ee=a(121),ve=a.n(Ee),be=a(63),ye=(a(297),a(158)),Se=a(86),we=a(52),Ne=a(246),_e=function(){return l.a.createElement(Ne.PassThrouthLoading,{size:"small",color:"#023e58"})},Ce=Object(ye.a)(Object(ye.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCHZV-ToxlUuJbLbuMNb7NrWhZYTgfT0L8",loadingElement:l.a.createElement("div",{style:{height:"100%"}}),containerElement:l.a.createElement("div",{style:{height:"368px"}}),mapElement:l.a.createElement("div",{style:{height:"100%"}})}),Se.withScriptjs,Se.withGoogleMap)((function(e){if(e.lat){var t=e.lat,a=e.lng;return l.a.createElement(Se.GoogleMap,{ref:e.onMapLoad,onClick:e.onMapClick,defaultOptions:{styles:X},defaultZoom:8,center:{lat:t,lng:a}},l.a.createElement(Se.Marker,{icon:v.a,position:{lat:t,lng:a}}))}return l.a.createElement(Se.GoogleMap,{defaultOptions:{styles:X},defaultZoom:8,center:{lat:34,lng:67}})})),ke=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.timeout=250,a.connect=function(){var e,t=new WebSocket("wss://wts.cs-satms.com:8443/ws/api/states/"),n=Object(h.a)(a);t.onopen=function(){a.setState({ws:t}),n.timeout=250,clearTimeout(e)},t.onclose=function(t){n.timeout=n.timeout+n.timeout,e=setTimeout(a.check,Math.min(1e4,n.timeout))},t.onerror=function(e){return t.close()},t.onmessage=function(e){if(e.data)var t=JSON.parse(e.data);if(a.state.assetData.length>0){var n=a.state.assetData.findIndex((function(e){return e[1]===t.message.split(",")[0]})),l=Object(m.a)(a.state.assetData),r=Object(i.a)({},l[n]);r[5]=t.message.split(",")[2],r[6]=t.message.split(",")[3],r[7]=t.message.split(",")[4],r[9]=t.message.split(",")[6],l[n]=r,a.setState({assetData:l})}}},a.check=function(){var e=a.state.ws;e&&e.readyState!==WebSocket.CLOSED||a.connect()},a.connectAlert=function(){var e,t=new WebSocket("wss://wts.cs-satms.com:8443/ws/api/alerts/"),n=Object(h.a)(a);t.onopen=function(){a.setState({wss:t}),n.timeout=250,clearTimeout(e)},t.onclose=function(t){n.timeout=n.timeout+n.timeout,e=setTimeout(a.checkAlert,Math.min(1e4,n.timeout))},t.onerror=function(e){return t.close()},t.onmessage=function(e){if(e.data)var t=JSON.parse(e.data);var n=t.message;if(n.length>0){var l=n.split(",")[0]+" is "+n.split(",")[1]+"now.",r=a.state.Alertdata;r.unshift({asset_name:n.split(",")[0],event:n.split(",")[1],timestamp:n.split(",")[2]}),a.setState({Alertdata:r,toast:l}),be.b.success(a.state.toast),setTimeout((function(){return a.setState({toast:void 0})}),0)}else t.message||a.setState({toast:""})}},a.checkAlert=function(){var e=a.state.wss;e&&e.readyState!==WebSocket.CLOSED||a.connect()},a.handleChangePag=function(e,t){a.setState({pag:t})},a.handleChangeRowsPerPag=function(e){a.setState({rowsPerPag:+e.target.value,pag:0})},a.handleSite=function(){var e=document.getElementById("sitee"),t=e.options[e.selectedIndex].value;a.setState({site:t,asset:""}),a.handleAsset(t)},a.handleAsset=function(e){var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(C).concat(e),{headers:t}).then((function(e){200===e.status&&a.setState({assetData:e.data})})).catch((function(e){return e})),P.a.get("".concat(b,":").concat(y,"/").concat(S,"/").concat(e,"/"),{headers:t}).then((function(e){if(a.setState({dataBySiteId:e.data}),0!==a.state.dataBySiteId.length){var t=parseFloat(a.state.dataBySiteId.lat_lng.split(",")[0]),n=parseFloat(a.state.dataBySiteId.lat_lng.split(",")[1]);a.setState({lat:t,lng:n})}})).catch((function(e){return e}))},a.handleAst=function(){var e=document.getElementById("assete"),t=e.options[e.selectedIndex].value;a.setState({asset:t})},a.state={siteData:[],site:"",rowsPerPag:3,pag:0,assetData:[],Alertdata:[],count:void 0,deviceData:[],regionData:[],asset:"",ID:"ABC",options:{labels:["Registered Undiscovered","Registered Discovered","UnAuthorized Entry","Stolen","In Transit"],colors:["#0992e1","#fd3550","#7f8281","#1e5aa0","#fb551d"],legend:{position:"bottom",labels:{colors:"white",useSeriesColors:!1}},responsive:[{breakpoint:void 0,options:{chart:{sparkline:{enabled:!1}}}}]},dataBySiteId:[],dataOfAssetStats:[],lat:void 0,lng:void 0,latlng:[],ws:null,wss:null,redirect:!1,done:!1,loading:!1,toast:void 0},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};this.setState({done:!0}),this.connect(),this.connectAlert(),P.a.get("".concat(b,":").concat(y,"/").concat(S,"/"),{headers:t}).then((function(t){200===t.status&&e.setState({siteData:t.data.results,done:!1})})).catch((function(t){if("Authentication credentials were not provided."!==t.response.data.detail)return t;localStorage.removeItem("accessToken"),e.setState({redirect:!0})})),P.a.get("".concat(b,":").concat(y,"/").concat(w,"/"),{headers:t}).then((function(t){200===t.status&&e.setState({regionData:t.data.results,done:!1})})).catch((function(e){return e})),P.a.get("".concat(b,":").concat(y,"/").concat(N,"/"),{headers:t}).then((function(t){e.setState({loading:!0}),200===t.status&&e.setState({deviceData:t.data.results,loading:!1})})).catch((function(e){return e})),P.a.get("".concat(b,":").concat(y,"/").concat("api/alerts","/?limit=1&offset=0"),{headers:t}).then((function(a){e.setState({count:a.data.count});var n=e.state.count-100;P.a.get("".concat(b,":").concat(y,"/").concat("api/alerts","/?limit=100&offset=").concat(n),{headers:t}).then((function(t){if(200===t.status){var a=t.data.results.map((function(e){return{event:e.event,timestamp:e.timestamp,asset_name:e.asset_name}}));e.setState({Alertdata:a.sort((function(e,t){return t.timestamp-e.timestamp}))})}})).catch((function(e){return e}))}))}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.toast===t.toast}},{key:"render",value:function(){var e=this,t=this.state,a=t.siteData,r=t.site,s=t.assetData,o=t.Alertdata,c=t.asset,i=t.dataBySiteId,m=t.pag,d=t.rowsPerPag,u=t.done,p=t.loading;console.log(this.state.toast,"Check");for(var g=a.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id}," ",e.site_name," ")})),h=s.map((function(e,t){return l.a.createElement("option",{key:t,value:e[10]},e[1])})),f=[],E=f.concat(this.state.assetData),v=0;v<E.length;v++)f.unshift({battery:E[v][5],temp:E[v][6],motion:E[v][7],type:E[v][9].replace("_"," ").toUpperCase()});for(var b=[],y=0;y<E.length;y++)b.push(E[y][9]);for(var S=b.filter((function(e){return"registered_undiscovered"===e})),w=b.filter((function(e){return"registered_discovered"===e})),N=b.filter((function(e){return"stolen"===e})),_=b.filter((function(e){return"intransit"===e})),C=b.filter((function(e){return"unauthorized"===e})),k=[S.length,w.length,C.length,N.length,_.length],x=[],O=0;O<E.length;O++)x.unshift({asset_id:E[O][0],asset_name:E[O][1],asset_brand:E[O][2],asset_owner_name:E[O][3],asset_owner_type:E[O][4],battery:E[O][5],temperature:E[O][6],motion:E[O][7],timestamp:E[O][8],type:E[O][9],id:E[O][10]});var D,A,P=x.findIndex((function(t){return t.id===parseInt(e.state.asset)})),j=x[P];function I(e){var t=new Date(1e3*e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+"-"+n+"-"+a+" "+t.getHours()+":"+t.getMinutes()}D=i.timestamp?I(i.timestamp):"",i.timestamp?A=I(i.timestamp):D="";var M=this.state.regionData[this.state.regionData.findIndex((function(e){return e.id===parseInt(i.region)}))];if(M)var z=M.region_name;var B=this.state.deviceData[this.state.deviceData.findIndex((function(e){return e.id===parseInt(i.device)}))];if(B)var V=B.device_name;var F=o.slice(m*d,m*d+d).map((function(e,t){var a;return a=e.timestamp?I(e.timestamp):"",l.a.createElement("tr",{key:t},l.a.createElement("td",null,t+1+d*m),l.a.createElement("td",null,e.event),l.a.createElement("td",null,e.asset_name),l.a.createElement("td",null,a))}));return this.state.redirect?l.a.createElement(we.a,{to:"/login"}):l.a.createElement(n.Fragment,null,u?l.a.createElement(_e,null):l.a.createElement(n.Fragment,null,l.a.createElement(W,{className:"col-lg-12"},l.a.createElement(W,{className:"row"},l.a.createElement(W,{className:"col-lg-6 "},l.a.createElement(W,{className:"apna-box"},l.a.createElement("select",{id:"sitee",className:"form-control",name:"siteId",value:r,onChange:this.handleSite},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Site"),g))),l.a.createElement(W,{className:"col-lg-6 "},l.a.createElement(W,{className:"apna-box"},r?p?l.a.createElement("select",{style:{color:"gray"},id:"assete",disabled:!0,className:"form-control",name:"siteId",value:c},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Loading.... "),h):0===s.length?l.a.createElement("select",{style:{color:"gray"},id:"assete",disabled:!0,className:"form-control",name:"siteId",value:c},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Selected site has no asset "),h):l.a.createElement("select",{id:"assete",className:"form-control",name:"siteId",value:c,onChange:this.handleAst},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Asset "),h):l.a.createElement("select",{style:{color:"gray"},id:"assete",className:"form-control",name:"siteId",disabled:!0,value:c},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Please Select A Site"),h," "))))),l.a.createElement(W,{className:"col-lg-12"},l.a.createElement(W,{className:"adjustment"},l.a.createElement("main",{className:"mycards"},l.a.createElement(W,{className:"mycontent"},l.a.createElement(W,{className:"col-sm-8"},l.a.createElement("h1",{style:{color:"#0992e1"}},S.length),l.a.createElement("span",null,l.a.createElement("p",null,"Registered Undiscovered"))),l.a.createElement(W,{className:"col-sm-4"},l.a.createElement("img",{alt:"Registered Undiscovered",src:oe.a}))),l.a.createElement(W,{className:"mycontent"},l.a.createElement(W,{className:"col-sm-8"},l.a.createElement("h1",{style:{color:"#fd3550"}},w.length),l.a.createElement("span",null,l.a.createElement("p",null,"Registered Discovered"))),l.a.createElement(W,{className:"col-sm-4"},l.a.createElement("img",{alt:"Registered Discovered",src:ie.a}))),l.a.createElement(W,{className:"mycontent"},l.a.createElement(W,{className:"col-sm-8"},l.a.createElement("h1",{style:{color:"#7f8281"}},C.length),l.a.createElement("span",null,l.a.createElement("p",null,"UnAuthorized Entry"))),l.a.createElement(W,{className:"col-sm-4"},l.a.createElement("img",{alt:"UnAuthorized Entry",src:de.a}))),l.a.createElement(W,{className:"mycontent"},l.a.createElement(W,{className:"col-sm-8"},l.a.createElement("h1",{style:{color:"#1e5aa0"}},N.length),l.a.createElement("span",null,l.a.createElement("p",null,"Stolen"))),l.a.createElement(W,{className:"col-sm-4"},l.a.createElement("img",{alt:"Stolen",src:pe.a}))),l.a.createElement(W,{className:"mycontent"},l.a.createElement(W,{className:"col-sm-8"},l.a.createElement("h1",{style:{color:"#fb551d"}},_.length),l.a.createElement("span",null,l.a.createElement("p",null,"In Transit"))),l.a.createElement(W,{className:"col-sm-4"},l.a.createElement("img",{alt:"In Transit",src:he.a})))))),l.a.createElement(W,{className:"col-lg-12"},l.a.createElement(W,{className:"row"},l.a.createElement(W,{className:"col-lg-8"},l.a.createElement(q,{className:"apna-box"},l.a.createElement(Z,null,l.a.createElement(ne.a,{fontSize:"small"}),l.a.createElement(K,null,"Site Location")),l.a.createElement(W,null,l.a.createElement(Ce,{isMarkerShown:!0,lat:this.state.lat,lng:this.state.lng})))),l.a.createElement(Y,{className:"col-lg-4"},l.a.createElement(q,{className:"apna-box"},l.a.createElement(Z,null,l.a.createElement($.a,{fontSize:"small"}),l.a.createElement(K,null,"Site Summary")),l.a.createElement(T.a,{options:this.state.options,series:k,type:"pie",width:"100%",height:400}))))),l.a.createElement(W,{className:"col-lg-12"},l.a.createElement(G,{className:"apna-box"},l.a.createElement(H,null,l.a.createElement(re.a,{fontSize:"small"}),l.a.createElement(K,null,"Site Information")),l.a.createElement("table",{className:"apna-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Site Id"),l.a.createElement("th",null,"Site Name"),l.a.createElement("th",null,"Location"),l.a.createElement("th",null,"Region"),l.a.createElement("th",null,"Device"),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,i.length<1?void 0:l.a.createElement("tr",null,l.a.createElement("td",null,i.site_id),l.a.createElement("td",null,i.site_name),l.a.createElement("td",null,i.lat_lng),l.a.createElement("td",null,z),l.a.createElement("td",null,V),l.a.createElement("td",null,D))))),0===i.length?l.a.createElement("p",{className:"flexi",style:{color:"red"}}," No Site Selected"):""),l.a.createElement(W,{className:"col-lg-12"},l.a.createElement(W,{className:"row"},l.a.createElement(Y,{className:"col-lg-6"},l.a.createElement(G,{className:"apna-box"},l.a.createElement(H,null,l.a.createElement(te.a,{fontSize:"small"}),l.a.createElement(K,null,"Asset State")),l.a.createElement("table",{className:"apna-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Battery"),l.a.createElement("th",null,"Temperature"),l.a.createElement("th",null,"Motion"),l.a.createElement("th",null,"State"))),l.a.createElement("tbody",null,P>=0?l.a.createElement("tr",null,255===parseInt(j.battery)?l.a.createElement("td",null,"N/A"):l.a.createElement("td",null,j.battery,"%"),65535===parseInt(j.temperature)?l.a.createElement("td",null,"N/A"):l.a.createElement("td",null,j.temperature,"\xb0C"),15===parseInt(j.motion)?l.a.createElement("td",null,"N/A"):0===parseInt(j.motion)?l.a.createElement("td",null,"No"):l.a.createElement("td",null,"Yes"),l.a.createElement("td",null,j.type.replace("_"," ").toUpperCase())):void 0)))),l.a.createElement(Y,{className:"col-lg-6"},l.a.createElement(G,{className:"apna-box"},l.a.createElement(H,null,l.a.createElement(re.a,{fontSize:"small"}),l.a.createElement(K,null,"Asset Information")),l.a.createElement("table",{className:"apna-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Asset Id"),l.a.createElement("th",null,"Asset Name"),l.a.createElement("th",null,"Created At"))),l.a.createElement("tbody",null,P>=0?l.a.createElement("tr",null,l.a.createElement("td",null,j.asset_id),l.a.createElement("td",null,j.asset_name),l.a.createElement("td",null,A)):void 0))))),c?"":l.a.createElement("p",{className:"flexi",style:{color:"red"}}," No Asset Selected")),l.a.createElement(W,{className:"col-lg-12"},l.a.createElement(G,{className:"apna-box"},l.a.createElement(H,null,l.a.createElement(ve.a,{fontSize:"small"}),l.a.createElement(K,null,"Alerts")),l.a.createElement("table",{className:"apna-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{style:{width:"10%"}},"Sr#"),l.a.createElement("th",{style:{width:"35%"}},"Event"),l.a.createElement("th",{style:{width:"25%"}},"Asset"),l.a.createElement("th",{style:{width:"30%"}},"Created At"))),l.a.createElement("tbody",null,F)),o.length>3?l.a.createElement(fe.a,{style:{color:"white",backgroundColor:"#1b1b1b"},rowsPerPageOptions:[3,5,10,15],component:"div",count:o.length,rowsPerPage:d,page:this.state.pag,onChangePage:this.handleChangePag,onChangeRowsPerPage:this.handleChangeRowsPerPag,labelRowsPerPage:"Alerts"}):"")),l.a.createElement(be.a,{position:"top-right",autoClose:2e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0}),l.a.createElement(W,{className:"col-lg-12"},l.a.createElement(W,{className:"toxt"},l.a.createElement("footer",null,"\xa9 2020 Cellsenal, All rights reserved")))))}}]),t}(n.Component),xe=a(6),Oe=a(4),De=a(38),Ae=a(589),Pe=a(581),je=a(253),Te=a.n(je),Ie=a(254),Me=a.n(Ie),ze=a(580),Be=a(578),Ve=a(577),Fe=a(252),Re=a.n(Fe),Le=a(255),Ue=a.n(Le),Je=a(256),Ge=a.n(Je),We=a(261),Ye=a.n(We),He=a(259),Ze=a.n(He),Ke=a(258),qe=a.n(Ke),Xe=a(257),Qe=a.n(Xe),$e=a(124),et=a.n($e),tt=a(262),at=a.n(tt),nt=a(579),lt=a(162),rt=a.n(lt);function st(){var e=Object(I.a)([""]);return st=function(){return e},e}function ot(){var e=Object(I.a)(["\ncolor: white;\n\n&:hover {\n  color: #0e84d1;\n}\n"]);return ot=function(){return e},e}function ct(){var e=Object(I.a)(["\n"]);return ct=function(){return e},e}function it(){var e=Object(I.a)(["\n\n&hover:{\n  width: 100%; height: 2px;\n  border-style: solid;\n  border-color: white;\n  background-color: #0e84d1;\n}\n"]);return it=function(){return e},e}function mt(){var e=Object(I.a)(["\n  margin-left: 6px; \n"]);return mt=function(){return e},e}function dt(){var e=Object(I.a)(["\n  padding:10px;\n  padding-left:20px;\n"]);return dt=function(){return e},e}function ut(){var e=Object(I.a)(["\n  margin-right: 5px;\n"]);return ut=function(){return e},e}function pt(){var e=Object(I.a)([""]);return pt=function(){return e},e}var gt=Object(nt.a)((function(e){return{grow:{flexGrow:1,backgroundColor:"#1b1b1b",width:"100%"},root:{display:"flex"},menuButton:{},hide:{display:"none"},title:Object(xe.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(xe.a)({position:"relative",borderRadius:"20px",height:"1.5rem",backgroundColor:"white","&:hover":{backgroundColor:"white"},marginRight:e.spacing(),marginLeft:0,float:"left",width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{width:e.spacing(4),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"grey"},inputRoot:{color:"black"},inputInput:Object(xe.a)({padding:e.spacing(0,0,0,3),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(xe.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(xe.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),appBar:{flexGrow:1,backgroundColor:"#1b1b1b",width:"100%",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{flexGrow:1,backgroundColor:"#1b1b1b",width:"calc(100% - ".concat(ft,"px)"),marginLeft:ft,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},drawer:{width:ft,flexShrink:0,whiteSpace:"nowrap",backgroundColor:"#0e84d1"},drawerOpen:{color:"white",backgroundImage:"url(".concat(rt.a,")"),width:ft,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(xe.a)({background:"black",color:"white",backgroundImage:"url(".concat(rt.a,")"),transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),drawerHeader:Object(i.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3)},sideBarName:{display:"inline"},sideBarNamesShift:{display:"none"},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),ht=M.default.div(pt()),ft=200,Et=M.default.img(ut()),vt=M.default.div(dt()),bt=M.default.span(mt()),yt=(M.default.a(it()),M.default.i(ct()),M.default.div(ot())),St=(M.default.br(st()),a(123)),wt=a.n(St),Nt=a(251),_t=a.n(Nt),Ct=a(29),kt=a(585),xt=a(590),Ot=a(582),Dt=a(583),At=a(584),Pt=a(260),jt=a.n(Pt);l.a.createContext();function Tt(e){var t,a,r,s,o,m,d,u,p,g,h,f=gt(),E=Object(De.a)(),v=Object(we.g)(),b=Object(i.a)({open:Object(n.useState)(!1)},e.state||{}),y=Object(c.a)(b.open,2),S=y[0],w=y[1],N=Object(n.useState)(!1),_=Object(c.a)(N,2),C=_[0],k=_[1];return l.a.createElement("div",{className:f.root},l.a.createElement(ze.a,{position:"fixed",className:Object(Oe.a)(f.appBar,Object(xe.a)({},f.appBarShift,S))},l.a.createElement(Be.a,{style:{padding:"0px"}},l.a.createElement(Et,{className:Object(Oe.a)((t={},Object(xe.a)(t,f.sideBarNamesShift,S),Object(xe.a)(t,f.sideBarNames,!S),t)),src:_t.a,style:{width:"65px",height:"45px"}}),l.a.createElement(Ve.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return w(!0)},edge:"start",className:Object(Oe.a)(f.menuButton,Object(xe.a)({},f.hide,S))},l.a.createElement(Re.a,null)),l.a.createElement(ht,{className:f.grow}),l.a.createElement(ht,null,l.a.createElement(Ve.a,{onClick:function(){return k(!0)}},l.a.createElement(et.a,{style:{color:"white"}}))))),l.a.createElement(Ae.a,{variant:"permanent",className:Object(Oe.a)(f.drawer,(a={},Object(xe.a)(a,f.drawerOpen,S),Object(xe.a)(a,f.drawerClose,!S),a)),classes:{paper:Object(Oe.a)((r={},Object(xe.a)(r,f.drawerOpen,S),Object(xe.a)(r,f.drawerClose,!S),r))}},l.a.createElement("div",{className:f.drawerHeader},l.a.createElement(Et,{src:wt.a,style:{height:"40px",width:"120px"}}),l.a.createElement(Ve.a,{style:{color:"white"},onClick:function(){return w(!1)}},"ltr"===E.direction?l.a.createElement(Te.a,null):l.a.createElement(Me.a,null))),l.a.createElement(Pe.a,null),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:"Dashboard"},l.a.createElement(Ue.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((s={},Object(xe.a)(s,f.sideBarNames,S),Object(xe.a)(s,f.sideBarNamesShift,!S),s))}," Dashboard")))),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/alerts",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:"Alerts"},l.a.createElement(ve.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((o={},Object(xe.a)(o,f.sideBarNames,S),Object(xe.a)(o,f.sideBarNamesShift,!S),o))}," Alerts ")))),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/sitemanagement",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:"Site Management"},l.a.createElement(Ge.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((m={},Object(xe.a)(m,f.sideBarNames,S),Object(xe.a)(m,f.sideBarNamesShift,!S),m))}," Site Management ")))),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/assetmanagement",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:"Asset Management "},l.a.createElement(Qe.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((d={},Object(xe.a)(d,f.sideBarNames,S),Object(xe.a)(d,f.sideBarNamesShift,!S),d))}," Asset Management ")))),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/devicemanagement",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:"Device Management"},l.a.createElement(qe.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((u={},Object(xe.a)(u,f.sideBarNames,S),Object(xe.a)(u,f.sideBarNamesShift,!S),u))}," Device Management ")))),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/transferassets",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:" Transfer Assets"},l.a.createElement(Ze.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((p={},Object(xe.a)(p,f.sideBarNames,S),Object(xe.a)(p,f.sideBarNamesShift,!S),p))}," Transfer Assets ")))),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/report",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:" Transfer Assets"},l.a.createElement(jt.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((g={},Object(xe.a)(g,f.sideBarNames,S),Object(xe.a)(g,f.sideBarNamesShift,!S),g))}," Reports")))),l.a.createElement(vt,null,l.a.createElement(Ct.b,{exact:!0,to:"/reporting",className:"main-nav",activeClassName:"main-nav-active"},l.a.createElement(yt,{className:"row",title:" Transfer Assets"},l.a.createElement(Ye.a,{fontSize:"small"}),l.a.createElement(bt,{className:Object(Oe.a)((h={},Object(xe.a)(h,f.sideBarNames,S),Object(xe.a)(h,f.sideBarNamesShift,!S),h))}," Reporting"))))),l.a.createElement(xt.a,{style:{color:"black"},isOpen:C,toggle:function(){k(!0)},backdrop:!1},l.a.createElement(Ot.a,null,"Logout ",l.a.createElement(et.a,null)),l.a.createElement(Dt.a,null,"Are you want to Logout?"),l.a.createElement(At.a,null,l.a.createElement(kt.a,{type:"submit",size:"small",variant:"contained",color:"secondary",onClick:function(){localStorage.removeItem("accessToken"),localStorage.clear(),v.push("/login")}},l.a.createElement(et.a,null),"Logout"),l.a.createElement("span",null),l.a.createElement(kt.a,{type:"submit",size:"small",variant:"contained",color:"primary",onClick:function(){return k(!1)}},l.a.createElement(at.a,null),"Cancel"))))}function It(){var e=Object(I.a)(["\n  padding :5px;\n  margin-top: 5px;\n  color: white;\n  font-size: 20px;\n  justify-content:center;\n  "]);return It=function(){return e},e}function Mt(){var e=Object(I.a)(["margin: 8px 0px 8px 0px;"]);return Mt=function(){return e},e}function zt(){var e=Object(I.a)(["font-size:14px;"]);return zt=function(){return e},e}function Bt(){var e=Object(I.a)(["font-size:14px;"]);return Bt=function(){return e},e}function Vt(){var e=Object(I.a)([""]);return Vt=function(){return e},e}function Ft(){var e=Object(I.a)([""]);return Ft=function(){return e},e}function Rt(){var e=Object(I.a)([""]);return Rt=function(){return e},e}function Lt(){var e=Object(I.a)([""]);return Lt=function(){return e},e}function Ut(){var e=Object(I.a)([""]);return Ut=function(){return e},e}function Jt(){var e=Object(I.a)([""]);return Jt=function(){return e},e}function Gt(){var e=Object(I.a)(["font-weight:bold; margin-top: 10px; margin-bottom: 10px; font-size:16px;"]);return Gt=function(){return e},e}var Wt=Object(nt.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(2),marginLeft:"230px",marginTop:20},contentShift:{flexGrow:1,padding:e.spacing(2),marginLeft:"80px",marginTop:20}}})),Yt=M.default.h3(Gt()),Ht=M.default.div(Jt()),Zt=M.default.br(Ut()),Kt=M.default.table(Lt()),qt=M.default.tr(Rt()),Xt=M.default.thead(Ft()),Qt=M.default.tbody(Vt()),$t=M.default.th(Bt()),ea=M.default.td(zt()),ta=M.default.label(Mt()),aa=(M.default.span(It()),a(534),function(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(Zt,null),l.a.createElement(ke,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(Zt,null),l.a.createElement(ke,null)))});function na(){var e=Object(I.a)(["\n"]);return na=function(){return e},e}function la(){var e=Object(I.a)(["\n"]);return la=function(){return e},e}function ra(){var e=Object(I.a)(["\nwidth: 611px;\nborder-radius: 8px;\nbox-shadow: var(--boxShadow);\nbackground: var(--mainbgcolor);\npadding: 3.5rem 7.8rem 2.1rem;\n"]);return ra=function(){return e},e}function sa(){var e=Object(I.a)(["\n    opacity: 0.57;\n    text-align: center;\n    margin: 0.8rem 0 5rem;\n    color: var(--textColor);\n    font: 16px/25px var(--PoppinsFont);\n"]);return sa=function(){return e},e}function oa(){var e=Object(I.a)(["\n"]);return oa=function(){return e},e}function ca(){var e=Object(I.a)(["\n    // width: 611px;\n    border-radius: 2rem;\n    box-shadow: var(--bocShadow);\n    background: var(--mainbgcolor);\n    padding: 3.5rem 7.8rem 2.1rem;\n"]);return ca=function(){return e},e}function ia(){var e=Object(I.a)(["\n"]);return ia=function(){return e},e}var ma=M.default.input(ia()),da=(M.default.div(ca()),M.default.h3(oa())),ua=(M.default.h2(sa()),M.default.form(ra())),pa=M.default.div(la()),ga=M.default.div(na()),ha=(a(535),a(39)),fa=a.n(ha);var Ea=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e))).handleUserInput=function(e){var t,n=e.target.name,l=e.target.value;a.setState((t={},Object(xe.a)(t,n,l),Object(xe.a)(t,"errors",""),t))},a.handleSubmit=function(e){e.preventDefault(),a.setState({isSubmitted:!0,errors:void 0});var t=function(e){var t={};return e.username&&e.password||(t="Please enter valid Username and Password"),{isValid:fa()(t),errors:t}}(a.state),n=t.isValid,l=t.errors;if(!n)return a.setState({errors:l,isSubmitted:!1}),!1;var r="grant_type=password&username="+a.state.username+"&password="+a.state.password,s={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(O+":"+x)};a.setState({loading:!0}),P.a.post("".concat(b,":").concat(y,"/").concat(k,"/"),r,{headers:s}).then((function(e){localStorage.setItem("accessToken",e.data.access_token),localStorage.setItem("expiry",e.data.expires_in),localStorage.setItem("refreshToken",e.data.refresh_token),200===e.status&&(a.props.history.push("/"),a.setState({accessToken:e.data.access_token,refreshToken:e.data.refresh_token,isSubmitted:!0,loading:!1}))})).catch((function(e){return e?a.setState({errors:"Invalid Username or Password",isSubmitted:!1,loading:!1}):""}))},a.state={username:"",password:"",isSubmitted:!1,errors:void 0,accessToken:void 0,refreshToken:void 0,loading:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){if(localStorage.getItem("accessToken"))return l.a.createElement(we.a,{to:"/"});var e=this.state,t=e.username,a=e.password,r=e.errors;return l.a.createElement(n.Fragment,null,l.a.createElement(pa,{className:"col-lg-12"},l.a.createElement(ga,{className:"card"},l.a.createElement("img",{alt:"",src:wt.a,style:{marginTop:"110px"}}),l.a.createElement(ua,{onSubmit:this.handleSubmit,style:{marginBottom:"70px"}},l.a.createElement(da,{style:{color:"gray"}},"Login"),r?l.a.createElement("span",{style:{color:"red"}},r):l.a.createElement("span",{style:{color:"gray",fontSize:"12px"}},"Please enter your username and Password to Login"),l.a.createElement(pa,{className:"form-group"},l.a.createElement(ma,{type:"text",name:"username",className:"form-control login-form textbox-margin",value:t.trim(),onChange:this.handleUserInput,placeholder:"Username"})),l.a.createElement(pa,{className:"form-group "},l.a.createElement(ma,{type:"password",name:"password",className:"form-control  login-form",value:a.trim(),onChange:this.handleUserInput,placeholder:"Password"})),l.a.createElement(pa,{className:"form-group"},l.a.createElement("button",{type:"submit",className:"form-control login-form btn btn-info"},"Login")),this.state.loading?l.a.createElement(pa,null," ",l.a.createElement("br",null),l.a.createElement(_e,null)):""))))}}]),t}(n.Component),va=a(80),ba=a.n(va),ya=a(54),Sa=a.n(ya),wa=a(82),Na=a.n(wa),_a=a(83),Ca=a.n(_a),ka=a(586),xa=a(81),Oa=a.n(xa);function Da(e){var t={};return e.device_id&&e.api_key&&e.device_name||(t="All Fields are Required"),{isValid:fa()(t),errors:t}}var Aa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.removerow=function(){var e={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.delete("".concat(b,":").concat(y,"/").concat(N,"/").concat(a.state.delId,"/"),{headers:e}).then((function(e){a.setState({done:!0});var t=a.state.delId,n=a.state.data.filter((function(e){return e.id!==t}));204===e.status&&a.setState({data:n})})).catch((function(e){if("Authentication credentials were not provided."!==e.response.data.detail)return e;localStorage.removeItem("accessToken"),a.setState({redirect:!0})}))},a.openEditModal=function(e,t,n,l){var r=!a.state.isOpen;a.setState({isOpen:r,id:e,device_id:t,device_name:n,api_key:l,errors:void 0})},a.openAddModal=function(){a.handleEmpty();var e=!a.state.openaddmodal;a.setState({openaddmodal:e,errors:void 0})},a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(xe.a)({},t,n))},a.toggleDeleteModal=function(e){var t=a.state.opendeleteModal;a.setState({opendeleteModal:!t,delId:e})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:+e.target.value,page:0})},a.state={data:[],rowsPerPage:15,page:0,opendeleteModal:!1,openaddmodal:!1,isOpen:!1,device_id:"",device_name:"",api_key:"",timestamp:Math.floor(Date.now()/1e3),id:"",delId:"",isSubmitted:!1,errors:void 0,done:void 0,redirect:!1},a.timeConverter=a.timeConverter.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(N,"/"),{headers:t}).then((function(t){e.setState({done:!0}),e._isMounted&&e.setState({data:t.data.results})})).catch((function(t){if("Authentication credentials were not provided."!==t.response.data.detail)return t;localStorage.removeItem("accessToken"),e.setState({redirect:!0})}))}},{key:"handleEmpty",value:function(){this.setState({device_id:"",device_name:"",api_key:""})}},{key:"handleEditSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isSubmitted:!0,errors:void 0});var a=Da(this.state),n=a.isValid,l=a.errors;if(!n)return this.setState({errors:l,isSubmitted:!1}),!1;var r="device_id="+this.state.device_id+"&device_name="+this.state.device_name+"&api_key="+this.state.api_key+"&timestamp="+this.state.timestamp,s={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.put("".concat(b,":").concat(y,"/").concat(N,"/").concat(this.state.id,"/"),r,{headers:s}).then((function(e){200===e.status&&(t.setState({isSubmitted:!0,isOpen:!1}),t.componentDidMount())})).catch((function(e){e.response.data.device_id?t.setState({errors:"Oops! Device ID already exists ",isSubmitted:!1}):e.response.data.device_name?t.setState({errors:"Oops! Device Name already exists ",isSubmitted:!1}):e.response.data.api_key&&t.setState({errors:"Oops! Device With this key already exists ",isSubmitted:!1})}))}},{key:"handleAddSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isSubmitted:!0,errors:void 0});var a=Da(this.state),n=a.isValid,l=a.errors;if(!n)return this.setState({errors:l,isSubmitted:!1}),!1;var r="device_id="+this.state.device_id+"&device_name="+this.state.device_name+"&api_key="+this.state.api_key+"&timestamp="+this.state.timestamp,s={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.post("".concat(b,":").concat(y,"/").concat(N,"/"),r,{headers:s}).then((function(e){201===e.status&&(t.setState({isSubmitted:!0,openaddmodal:!1}),t.componentDidMount())})).catch((function(e){e.response.data.device_id?t.setState({errors:"Oops! Device ID already exists ",isSubmitted:!1}):e.response.data.device_name?t.setState({errors:"Oops! Device Name already exists ",isSubmitted:!1}):e.response.data.api_key&&t.setState({errors:"Oops! Device With this key already exists ",isSubmitted:!1})}))}},{key:"timeConverter",value:function(e){var t=new Date(1e3*e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,r=t.opendeleteModal,s=t.isOpen,o=t.page,c=t.rowsPerPage,i=t.api_key,m=t.device_id,d=t.device_name,u=t.openaddmodal,p=t.errors;return this.state.redirect?l.a.createElement(we.a,{to:"/login"}):l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Ht,{className:"col-lg-12 boxtt"},l.a.createElement(Yt,null," Device Management"),this.state.done?l.a.createElement(Kt,{className:"new-table"},l.a.createElement(Xt,null,l.a.createElement(qt,null,l.a.createElement($t,null,"Sr#"),l.a.createElement($t,null,"Device Id"),l.a.createElement($t,null,"Device Name"),l.a.createElement($t,null,"Device Api Key"),l.a.createElement($t,null,"Created At"),l.a.createElement($t,null,"Actions"))),l.a.createElement(Qt,null,this.state.data.slice(o*c,o*c+c).reverse().map((function(t,a){var n=e.timeConverter(t.timestamp);return l.a.createElement(qt,{key:a},l.a.createElement(ea,{style:{width:"5%"}},a+1+c*o),l.a.createElement(ea,{style:{width:"10%"}},t.device_id),l.a.createElement(ea,{style:{width:"15%"}},t.device_name),l.a.createElement(ea,{style:{width:"25%"}},t.api_key),l.a.createElement(ea,{style:{width:"25%"}},n),l.a.createElement(ea,{style:{width:"30%"}},l.a.createElement(Ve.a,{style:{color:"white"},onClick:e.openEditModal.bind(e,t.id,t.device_id,t.device_name,t.api_key)},l.a.createElement(ba.a,{fontSize:"small"})),l.a.createElement(Ve.a,{style:{color:"white"},onClick:e.toggleDeleteModal.bind(e,t.id)},l.a.createElement(Sa.a,{fontSize:"small"})),l.a.createElement(xt.a,{style:{color:"black"},isOpen:r,backdrop:!1,toggle:e.toggleDeleteModal},l.a.createElement(Ot.a,{toggle:function(){return e.setState({opendeleteModal:!1})}}," Delete Device ",l.a.createElement(Oa.a,null)),l.a.createElement(Dt.a,null,"Are you want to delete Device?"),l.a.createElement(At.a,null,l.a.createElement(kt.a,{type:"submit",size:"small",variant:"outlined",color:"secondary",onClick:function(){e.removerow(t.id),e.setState({opendeleteModal:!1})}},l.a.createElement(Sa.a,null),"Delete"),l.a.createElement("span",null),l.a.createElement(kt.a,{type:"submit",size:"small",variant:"outlined",color:"primary",onClick:function(){return e.setState({opendeleteModal:!1})}},l.a.createElement(Na.a,null),"Cancel")))))})))):l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(_e,null)),l.a.createElement(Zt,null),a.length>10?l.a.createElement(fe.a,{style:{color:"white",backgroundColor:"#1b1b1b"},rowsPerPageOptions:[10,15,20,100],component:"div",count:a.length,rowsPerPage:c,page:o,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,labelRowsPerPage:"Devices Per Page"}):""),l.a.createElement(xt.a,{isOpen:s,toggle:this.openEditModal,backdrop:!1},l.a.createElement(Ot.a,{toggle:function(){return e.setState({isOpen:!1})}},"Edit Device"),l.a.createElement(Dt.a,null,l.a.createElement("form",{className:"form-group"},l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Device ID : "),l.a.createElement("input",{type:"text",className:"form-control",value:m,disabled:!0})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Device Name : "),l.a.createElement("input",{type:"text",className:"form-control",name:"device_name",value:d,onChange:this.handleChange,placeholder:"Device Name"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Device Key : "),l.a.createElement("input",{type:"text",className:"form-control",name:"api_key",value:i.trim(),onChange:this.handleChange,placeholder:"Device Key"})),l.a.createElement("button",{className:"form-group col-lg-12 btn btn-info flexi",type:"submit",onClick:this.handleEditSubmit.bind(this),size:"large",variant:"contained",color:"primary"}," Done"),p?l.a.createElement("span",{style:{color:"red",margin:"auto",fontSize:"12px"}},p):""))),l.a.createElement(xt.a,{style:{color:"black"},isOpen:u,backdrop:!1,toggle:this.openAddModal},l.a.createElement(Ot.a,{toggle:function(){return e.setState({openaddmodal:!1})}},"Add New Device"),l.a.createElement(Dt.a,null,l.a.createElement("form",{className:"form-group",onSubmit:this.handleEditSubmit},l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Device ID ",l.a.createElement("span",{className:"asterisk_input"})),l.a.createElement("input",{type:"text",name:"device_id",className:"form-control",value:m.trim(),onChange:this.handleChange,placeholder:"Device ID",required:!0})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Device Name ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"device_name",value:d,onChange:this.handleChange,placeholder:"Device Name"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Device Key ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"api_key",value:i.trim(),onChange:this.handleChange,placeholder:"Device Key"})),l.a.createElement("button",{className:"form-group col-lg-12 btn btn-info flexi",onClick:this.handleAddSubmit.bind(this),type:"submit",size:"medium",variant:"contained",color:"primary","aria-label":"add"},"ADD DEVICE"),p?l.a.createElement("span",{style:{color:"red",margin:"auto",fontSize:"12px"}},p):""))),l.a.createElement(ka.a,{style:{bottom:"10px",position:"fixed",right:"10px"},onClick:this.openAddModal,size:"large",color:"secondary","aria-label":"add",title:"Add New Device"},l.a.createElement(Ca.a,null)))}}]),t}(n.Component);function Pa(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(Aa,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(Aa,null)))}var ja=a(163),Ta=a.n(ja);function Ia(e){var t={};return e.site_id&&e.site_name&&e.lat_lng&&e.region&&e.device?e.lat_lng.match(/([0-9.-]+).+?([0-9.-]+)/)||(t="Please insert valid latitude and longitude"):t="All Fields are required",{errors:t,isValid:fa()(t)}}var Ma={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")},za=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.removerow=function(){a._isMounted=!0;var e=a.state.delId,t=a.state.data.filter((function(t){return t.id!==e}));P.a.delete("".concat(b,":").concat(y,"/").concat(S,"/").concat(a.state.delId,"/"),{headers:Ma}).then((function(e){a.setState({done:!0}),204===e.status&&a.setState({data:t,done:!1})})).catch((function(e){if("Authentication credentials were not provided."!==e.response.data.detail)return e;localStorage.removeItem("accessToken"),a.setState({redirect:!0})}))},a.openEditModal=function(e,t,n,l,r,s){var o=!a.state.isOpen;a.setState({isOpen:o,id:e,site_id:t,site_name:n,lat_lng:l,region:r,device:s,errors:void 0})},a.getRegion=function(){var e={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(w,"/"),{headers:e}).then((function(e){200===e.status&&a.setState({regionData:e.data.results})})).catch((function(e){return e}))},a.getDevice=function(){var e={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(N,"/"),{headers:e}).then((function(e){200===e.status&&a.setState({deviceData:e.data.results})})).catch((function(e){return e}))},a.handleEmpty=function(){a.setState({site_id:"",site_name:"",lat_lng:"",region:"",device:""})},a.openAddModal=function(){a.handleEmpty();var e=!a.state.openaddmodal;a.setState({openaddmodal:e,errors:void 0})},a.handleChange=function(e){var t,n=e.target.name,l=e.target.value;if(32===(e?e.which:window.event.keyCode))return!1;a.setState((t={},Object(xe.a)(t,n,l),Object(xe.a)(t,"errors",""),t))},a.handleChangeLatLng=function(e){var t=e.target.value;if(32===(e?e.which:window.event.keyCode))return!1;var n=t.includes(",");n||a.setState({errors:"Please insert valid lat long, i.e 76,34"}),n&&a.setState({errors:""}),t.includes(" ")&&a.setState({errors:"No Space allow in lat long, i.e 76,34"}),a.setState({lat_lng:t})},a.handleChangeRegion=function(){var e=document.getElementById("region"),t=e.options[e.selectedIndex].value;a.setState({region:t,errors:""})},a.handleChangeDevice=function(){var e=document.getElementById("device"),t=e.options[e.selectedIndex].value;a.setState({device:t,errors:""})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:+e.target.value,page:0})},a.toggleDeleteModal=function(e){var t=a.state.opendeleteModal;a.setState({opendeleteModal:!t,delId:e})},a.state={data:[],deviceData:[],regionData:[],openaddmodal:!1,isOpen:!1,opendeleteModal:!1,backdrop:!0,site_id:"",site_name:"",lat_lng:"",region:"",device:"",page:0,rowsPerPage:10,timestamp:Math.floor(Date.now()/1e3),id:"",delId:"",isSubmitted:!1,errors:void 0,done:!1,redirect:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e,t,a=this;return Ta.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return this._isMounted=!0,this.getRegion(),this.getDevice(),e=localStorage.getItem("accessToken"),t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+e},n.next=7,Ta.a.awrap(P.a.get("".concat(b,":").concat(y,"/").concat(S,"/"),{headers:t}).then((function(e){a.setState({done:!0}),200===e.status&&a.setState({data:e.data.results.reverse()})})).catch((function(e){if("Authentication credentials were not provided."!==e.response.data.detail)return e;localStorage.removeItem("accessToken"),a.setState({redirect:!0})})));case 7:case"end":return n.stop()}}),null,this)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleAddSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isSubmitted:!0,errors:void 0});var a=Ia(this.state),n=a.isValid,l=a.errors;if(!n)return this.setState({errors:l,isSubmitted:!1}),!1;var r="site_id="+this.state.site_id+"&site_name="+this.state.site_name+"&lat_lng="+this.state.lat_lng+"&region="+this.state.region+"&device="+this.state.device+"&timestamp="+this.state.timestamp;P.a.post("".concat(b,":").concat(y,"/").concat(S,"/"),r,{headers:Ma}).then((function(e){201===e.status&&(t.setState({isSubmitted:!0,openaddmodal:!1}),t.componentDidMount())})).catch((function(e){e.response.data.site_id?t.setState({errors:"Oops! Site ID already exists ",isSubmitted:!1}):e.response.data.site_name?t.setState({errors:"Oops! Site Name already exists ",isSubmitted:!1}):e.response.data.device&&t.setState({errors:"Oops! This device already exists ",isSubmitted:!1})}))}},{key:"handleEditSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isSubmitted:!0,errors:void 0});var a=Ia(this.state),n=a.isValid,l=a.errors;if(!n)return this.setState({errors:l,isSubmitted:!1}),!1;var r="site_id="+this.state.site_id+"&site_name="+this.state.site_name+"&lat_lng="+this.state.lat_lng+"&region="+this.state.region+"&device="+this.state.device+"&timestamp="+this.state.timestamp;P.a.put("".concat(b,":").concat(y,"/").concat(S,"/").concat(this.state.id,"/"),r,{headers:Ma}).then((function(e){200===e.status&&(t.setState({isSubmitted:!0,isOpen:!1}),t.componentDidMount())})).catch((function(e){e.response.data.site_id?t.setState({errors:"Oops! Site ID already exists ",isSubmitted:!1}):e.response.data.site_name?t.setState({errors:"Oops! Site Name already exists ",isSubmitted:!1}):e.response.data.device&&t.setState({errors:"Oops! This device already exists ",isSubmitted:!1})}))}},{key:"timeConverter",value:function(e){var t=new Date(1e3*e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"render",value:function(){var e=this,t=this.state,a=t.site_name,r=t.site_id,s=t.id,o=t.lat_lng,c=t.region,i=t.device,m=t.isOpen,d=t.data,u=t.openaddmodal,p=t.page,g=t.rowsPerPage,h=t.opendeleteModal,f=t.regionData,E=t.deviceData,v=t.errors;return this.state.redirect?l.a.createElement(we.a,{to:"/login"}):l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Ht,{className:"col-lg-12 boxtt"},l.a.createElement(Yt,null," Site Management "),this.state.done?l.a.createElement(Kt,{className:"new-table"},l.a.createElement(Xt,null,l.a.createElement(qt,null,l.a.createElement($t,null,"Sr#"),l.a.createElement($t,null,"Site Id"),l.a.createElement($t,null,"Site Name"),l.a.createElement($t,null,"Location"),l.a.createElement($t,null,"Region"),l.a.createElement($t,null,"Device"),l.a.createElement($t,null,"Created At"),l.a.createElement($t,null,"Actions"))),l.a.createElement(Qt,null,d.slice(p*g,p*g+g).reverse().map((function(t,a){var n=e.state.regionData[e.state.regionData.findIndex((function(e){return e.id===parseInt(t.region)}))];if(n)var r=n.region_name;var s=e.state.deviceData[e.state.deviceData.findIndex((function(e){return e.id===parseInt(t.device)}))];if(s)var o=s.device_name;var c=e.timeConverter(t.timestamp);return l.a.createElement(qt,{tabIndex:-1,key:a},l.a.createElement(ea,null,a+1+g*p),l.a.createElement(ea,null,t.site_id),l.a.createElement(ea,null,t.site_name),l.a.createElement(ea,null,t.lat_lng),l.a.createElement(ea,null,r),l.a.createElement(ea,null,o),l.a.createElement(ea,null,c),l.a.createElement(ea,null,l.a.createElement(Ve.a,{style:{color:"white"},onClick:e.openEditModal.bind(e,t.id,t.site_id,t.site_name,t.lat_lng,t.region,t.device)},l.a.createElement(ba.a,{fontSize:"small"})),l.a.createElement(Ve.a,{style:{color:"white"},onClick:e.toggleDeleteModal.bind(e,t.id)},l.a.createElement(Sa.a,{fontSize:"small"})),l.a.createElement(xt.a,{style:{color:"black"},isOpen:h,toggle:e.toggleDeleteModal,backdrop:!1},l.a.createElement(Ot.a,{toggle:function(){return e.setState({opendeleteModal:!1})}},"  Delete Site ",l.a.createElement(Oa.a,null)),l.a.createElement(Dt.a,null,"Are you want to delete this Site ? "),l.a.createElement(At.a,null,l.a.createElement(kt.a,{type:"submit",size:"small",variant:"outlined",color:"secondary",onClick:function(){e.setState({opendeleteModal:!1}),e.removerow(t.id)}},l.a.createElement(Sa.a,null),"Delete"),l.a.createElement("span",null),l.a.createElement(kt.a,{type:"submit",size:"small",variant:"outlined",color:"primary",onClick:function(){return e.setState({opendeleteModal:!1})}},l.a.createElement(Na.a,null),"Cancel")))))})))):l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(_e,null)),d.length>10?l.a.createElement(fe.a,{style:{color:"white",backgroundColor:"#1b1b1b"},rowsPerPageOptions:[3,10,20,100],component:"div",count:d.length,rowsPerPage:g,page:p,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,labelRowsPerPage:"Sites Per Page"}):"",l.a.createElement(Zt,null)),l.a.createElement(xt.a,{isOpen:m,toggle:this.openEditModal,backdrop:!1},l.a.createElement(Ot.a,{toggle:function(){return e.setState({isOpen:!1})}},"Edit Site"),l.a.createElement(Dt.a,null,l.a.createElement("form",{className:"form-group"},l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Site ID ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"site_id",className:"form-control",value:r,disabled:!0,placeholder:s})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"site_name"},"Site Name ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"site_name",className:"form-control",value:a,onChange:this.handleChange,placeholder:"Site Name"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"lat_lng"},"Lat,Lng ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"lat_lng",value:o.trim(),onChange:this.handleChange,placeholder:"Latitude, Longitude"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"region"},"Region ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("select",{className:"form-control",name:"region",id:"region",value:c,onChange:this.handleChangeRegion,placeholder:"Region"},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Region"),f.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id}," ",e.region_name," ")})))),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"Device"},"Device ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("select",{className:"form-control",name:"device",id:"device",value:i,onChange:this.handleChangeDevice,placeholder:"Device"},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Device"),E.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id}," ",e.device_name," ")})))),l.a.createElement("button",{className:"form-group col-lg-12 btn btn-info flexi",onClick:this.handleEditSubmit.bind(this),type:"submit",size:"large",variant:"contained",color:"primary","aria-label":"add"}," Done"),v?l.a.createElement("span",{style:{color:"red",margin:"auto",fontSize:"12px"}},v):""))),l.a.createElement(xt.a,{style:{color:"black"},isOpen:u,toggle:this.openAddModal,backdrop:!1},l.a.createElement(Ot.a,{toggle:this.openAddModal},"Add New Site"),l.a.createElement(Dt.a,null,l.a.createElement("form",{className:"form-group"},l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"site_id"},"Site ID ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"site_id",className:"form-control",value:r.trim(),onChange:this.handleChange,placeholder:"Site ID"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Site Name ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"site_name",className:"form-control",value:a,onChange:this.handleChange,placeholder:"Site Name"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"lat_lng"},"Lat,Lng ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"lat_lng",value:o.trim(),onChange:this.handleChange,placeholder:"Latitude, Longitude"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"region"},"Region ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("select",{className:"form-control",name:"region",id:"region",value:c,onChange:this.handleChangeRegion,placeholder:"Region"},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Region"),f.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id}," ",e.region_name," ")})))),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"device"},"Device ",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("select",{className:"form-control",name:"device",id:"device",value:i,onChange:this.handleChangeDevice,placeholder:"Device"},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Device"),E.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id}," ",e.device_name," ")})))),l.a.createElement("button",{className:"form-group col-lg-12 btn btn-info flexi",onClick:this.handleAddSubmit.bind(this),type:"submit",size:"medium",variant:"contained",color:"primary","aria-label":"add"},"ADD SITE"),v?l.a.createElement("span",{style:{color:"red",margin:"auto",fontSize:"12px"}},v):""))),l.a.createElement(ka.a,{style:{bottom:"10px",position:"fixed",right:"10px"},onClick:this.openAddModal,color:"secondary","aria-label":"add",title:"Add New Site"},l.a.createElement(Ca.a,null)))}}]),t}(n.Component);function Ba(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(za,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(za,null)," "))}var Va=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l))))._isMounted=!1,a.state={Alertdata:[],rowsPerPage:15,page:0,count:void 0,redirect:!1,done:!1},a.connectAlert=function(){var e,t=new WebSocket("wss://wts.cs-satms.com:8443/ws/api/alerts/"),n=Object(h.a)(a);t.onopen=function(){a.setState({wss:t}),n.timeout=250,clearTimeout(e)},t.onclose=function(t){n.timeout=n.timeout+n.timeout,e=setTimeout(a.checkAlert,Math.min(1e4,n.timeout))},t.onerror=function(e){return e?t.close():""},t.onmessage=function(e){if(e.data)var t=JSON.parse(e.data);var n=t.message;if(n.length>0){var l=a.state.Alertdata;l.unshift({asset_name:n.split(",")[0],event:n.split(",")[1],timestamp:n.split(",")[2]}),a.setState({Alertdata:l})}}},a.checkAlert=function(){var e=a.state.wss;e&&e.readyState!==WebSocket.CLOSED||a.connect()},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:+e.target.value,page:0})},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};this.connectAlert(),this.setState({done:!0}),P.a.get("".concat(b,":").concat(y,"/").concat("api/alerts","/?limit=1&offset=0"),{headers:t}).then((function(a){e.setState({count:a.data.count});var n=e.state.count-100;P.a.get("".concat(b,":").concat(y,"/").concat("api/alerts","/?limit=100&offset=").concat(n),{headers:t}).then((function(t){200===t.status&&e.setState({Alertdata:t.data.results,done:!1})})).catch((function(t){if("Authentication credentials were not provided."!==t.response.data.detail)return t;localStorage.removeItem("accessToken"),e.setState({redirect:!0})}))}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"timeConverter",value:function(e){var t=new Date(1e3*e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"render",value:function(){var e=this,t=this.state,a=t.Alertdata,r=t.page,s=t.rowsPerPage,o=a.slice(r*s,r*s+s).reverse().map((function(t,a){var n;return n=t.timestamp?e.timeConverter(t.timestamp):"",l.a.createElement(qt,{key:t.id,style:{height:"30px"}},l.a.createElement(ea,null,a+1+s*r),l.a.createElement(ea,null,t.event),l.a.createElement(ea,null,t.asset_name),l.a.createElement(ea,null,n))}));return this.state.redirect?l.a.createElement(we.a,{to:"/login"}):l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Ht,{className:"col-lg-12 boxtt"},l.a.createElement(Yt,null,"Alerts"),this.state.done?l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(_e,null)):l.a.createElement(Kt,{className:"new-table"},l.a.createElement(Xt,null,l.a.createElement(qt,null,l.a.createElement($t,null,"Sr#"),l.a.createElement($t,null,"Events"),l.a.createElement($t,null,"Asset"),l.a.createElement($t,null,"Created At"))),l.a.createElement(Qt,null,o)),a.length>10?l.a.createElement(fe.a,{style:{color:"white",backgroundColor:"#1b1b1b"},rowsPerPageOptions:[10,15,20,100],component:"div",count:a.length,rowsPerPage:s,page:r,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,labelRowsPerPage:"Assets Per Page"}):""),l.a.createElement(Zt,null))}}]),t}(l.a.PureComponent);function Fa(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(Va,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(Va,null)))}var Ra=a(263),La=a.n(Ra);var Ua=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(l))))._isMounted=!1,a.state={sites:[],assets:[],open:!1,transfer:!1,siteVal:"",assetVal:"",toSite:"",isSubmitted:!1,errors:void 0,redirect:!1,done:!1,loading:!1},a.toggleModal=function(e){e.preventDefault(),a.setState({isSubmitted:!0,errors:void 0});var t=function(e){var t={};return e.assetVal&&e.toSite&&e.siteVal?e.assetVal?e.toSite===e.siteVal&&(t="Sorry you have selected same site"):t="You have not selected asset":t="All Fields are require",{isValid:fa()(t),errors:t}}(a.state),n=t.isValid,l=t.errors;if(!n)return a.setState({errors:l,isSubmitted:!1}),!1;a.setState({open:!0})},a.toggleModalSuccess=function(){a.setState({transfer:!a.state.transfer})},a.handleEmpty=function(){a.setState({siteVal:"",assetVal:"",toSite:""})},a.handleChange=function(){a.handleEmpty();var e=document.getElementById("site"),t=e.options[e.selectedIndex].value;a.setState({siteVal:t,errors:void 0,assetVal:""}),a.handleChangeAssets(t)},a.handleChangeAssets=function(e){var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(C).concat(e),{headers:t}).then((function(e){a.setState({loading:!0}),200===e.status&&a.setState({assets:e.data,loading:!1})})).catch((function(e){if("Authentication credentials were not provided."!==e.response.data.detail)return e;Object(be.b)("Sorry! Session Expired Please Login Again"),localStorage.removeItem("accessToken"),a.setState({redirect:!0})}))},a.handleChangeAst=function(){var e=document.getElementById("asset"),t=e.options[e.selectedIndex].value;a.setState({assetVal:t,errors:""})},a.handleChangeToSite=function(){var e=document.getElementById("tosite"),t=e.options[e.selectedIndex].value;a.setState({toSite:t,errors:""})},a.handleSubmit=function(e){e.preventDefault();var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")},n="asset_id="+a.state.assetVal+"&site_id="+a.state.toSite;P.a.post("".concat(b,":").concat(y,"/assets_transfer"),n,{headers:t}).then((function(e){a.setState({done:!0}),200===e.status&&(a.setState({open:!1,transfer:!0,siteVal:"",assetVal:"",toSite:"",done:!1}),setTimeout((function(){return a.setState({transfer:!1})}),2e3))})).catch((function(e){if("Authentication credentials were not provided."===e.response.data.detail)localStorage.removeItem("accessToken"),a.setState({redirect:!0});else{if(304!==e.response.status)return e;be.b.error("Sorry! Your Request can't fulfill right now :(")}}))},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};this.setState({done:!0}),P.a.get("".concat(b,":").concat(y,"/").concat(S,"/"),{headers:t}).then((function(t){200===t.status&&e.setState({sites:t.data.results,done:!1})})).catch((function(t){if("Authentication credentials were not provided."!==t.response.data.detail)return t;Object(be.b)("Sorry! Session Expired Please Login Again"),localStorage.removeItem("accessToken"),e.setState({redirect:!0})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.transfer,r=t.sites,s=t.assets,o=t.siteVal,c=t.assetVal,i=t.toSite,m=t.errors,d=t.done,u=t.loading,p=r.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.site_name)})),g=s.map((function(e,t){return l.a.createElement("option",{key:t,value:e[10]},e[1])})),h=r.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.site_name)}));return this.state.redirect?l.a.createElement(we.a,{to:"/login"}):l.a.createElement(Ht,null,l.a.createElement(Zt,null),l.a.createElement(Ht,{className:"col-lg-12 flexi"},l.a.createElement(Ht,{className:"flexi"},l.a.createElement(Yt,null," Transfer Assets "))),l.a.createElement(Ht,{className:"col-lg-12 flexi  stret"},d?l.a.createElement(l.a.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(_e,null)):l.a.createElement(Ht,{className:"col-lg-4 boxt"},l.a.createElement(Zt,null),l.a.createElement("form",{className:"form-group"},l.a.createElement(ta,null,"From Site : "),l.a.createElement("select",{className:"form-control",id:"site",name:"site",onChange:this.handleChange,value:o},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Site"),p),l.a.createElement(ta,null,"Select Asset : "),o?0===s.length?l.a.createElement("select",{className:"form-control",id:"asset",name:"asset",disabled:!0,value:c},l.a.createElement("option",{className:"brave",defaultValue:!0},"No Asset Available"),g):l.a.createElement("select",{className:"form-control",id:"asset",name:"asset",onChange:this.handleChangeAst,value:c},l.a.createElement("option",{className:"brave",disabled:!0,value:""},"Select Asset"),g):l.a.createElement("select",{className:"form-control",id:"asset",name:"asset",disabled:!0,value:c},l.a.createElement("option",{className:"brave",defaultValue:!0},"Select Site First"),g),l.a.createElement(ta,null,"To Site : "),o?c?u?l.a.createElement("select",{className:"form-control",id:"tosite",name:"tosite",disabled:!0},l.a.createElement("option",{className:"brave"},"Loading... ")):l.a.createElement("select",{className:"form-control",id:"tosite",name:"tosite",onChange:this.handleChangeToSite,value:i},l.a.createElement("option",{className:"brave",disabled:!0,value:""},"Select Site "),h):l.a.createElement("select",{className:"form-control",id:"tosite",name:"tosite",disabled:!0},l.a.createElement("option",{className:"brave",defaultValue:!0},"Select Asset First ")):l.a.createElement("select",{className:"form-control",id:"tosite",name:"tosite",disabled:!0},l.a.createElement("option",{className:"brave",defaultValue:!0},"Select Site And Asset ")),l.a.createElement(Zt,null),m?l.a.createElement("span",{className:"flexi",style:{color:"red",fontSize:"12px"}},m):"",n?l.a.createElement("span",{className:"flexi",style:{color:"#ffffff",fontSize:"14px"}},"Asset Transferred Successfully!!!"):l.a.createElement("button",{onClick:this.toggleModal,className:"form-control btn btn-info",id:"seli"},"Transfer Asset")))),l.a.createElement(xt.a,{style:{color:"black"},isOpen:a,toggle:this.toggleModal},l.a.createElement(Ot.a,null," Transfer Assets ",l.a.createElement(La.a,null)),l.a.createElement(Dt.a,null,"Are you want to transfer Asset?"),l.a.createElement(At.a,null,l.a.createElement(Ht,null,l.a.createElement(kt.a,{type:"submit",size:"small",variant:"contained",color:"primary",onClick:this.handleSubmit}," Yes")),l.a.createElement(Ht,null,l.a.createElement(kt.a,{type:"submit",size:"small",variant:"contained",color:"secondary",onClick:function(){return e.setState({open:!1})}}," No")))),l.a.createElement(be.a,null))}}]),t}(n.Component);function Ja(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(Ua,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(Ua,null)))}function Ga(e){var t={};return e.asset_id&&e.asset_name&&e.asset_brand&&e.asset_owner_name&&e.asset_owner_type&&e.site||(t="All Fields are Required"),{isValid:fa()(t),errors:t}}var Wa={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")},Ya=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.removerow=function(){var e={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.delete("".concat(b,":").concat(y,"/").concat(_,"/").concat(a.state.delId,"/"),{headers:e}).then((function(e){a.setState({done:!0});var t=a.state.delId,n=a.state.data.filter((function(e){return e.id!==t}));204===e.status&&a.setState({data:n})})).catch((function(e){if("Authentication credentials were not provided."!==e.response.data.detail)return e;localStorage.removeItem("accessToken"),a.setState({redirect:!0})}))},a.openEditModal=function(e,t,n,l,r,s,o){var c=!a.state.isOpen;a.setState({isOpen:c,id:e,asset_id:t,asset_brand:r,asset_name:n,asset_owner_name:l,asset_owner_type:s,site:o,errors:void 0})},a.openAddModal=function(){a.handleEmpty();var e=!a.state.openaddmodal;a.setState({openaddmodal:e,errors:void 0})},a.handleChange=function(e){var t,n=e.target.name,l=e.target.value;a.setState((t={},Object(xe.a)(t,n,l),Object(xe.a)(t,"errors",""),t))},a.handleEmpty=function(){a.setState({asset_id:"",asset_name:"",asset_brand:"",asset_owner_name:"",asset_owner_type:"",site:""})},a.handleEditSubmit=function(e){e.preventDefault(),a.setState({isSubmitted:!0,errors:void 0});var t=Ga(a.state),n=t.isValid,l=t.errors;if(!n)return a.setState({errors:l,isSubmitted:!1}),!1;var r="asset_id=+".concat(a.state.asset_id,"+&asset_name=+").concat(a.state.asset_name,"+&asset_brand=+").concat(a.state.asset_brand,"+&asset_owner_name=+").concat(a.state.asset_owner_name,"+&asset_owner_type=+").concat(a.state.asset_owner_type,"+&timestamp=").concat(a.state.timestamp,"+&site=+").concat(a.state.site);P.a.put("".concat(b,":").concat(y,"/").concat(_,"/").concat(a.state.id,"/"),r,{headers:Wa}).then((function(e){200===e.status&&(a.setState({isSubmitted:!0,isOpen:!1}),a.componentDidMount())})).catch((function(e){e.response.data.asset_id?a.setState({errors:"Oops! AssetID already exists ",isSubmitted:!1}):e.response.data.asset_name&&a.setState({errors:"Oops! AssetName already exists ",isSubmitted:!1})}))},a.handleChangeSite=function(){var e=document.getElementById("site"),t=e.options[e.selectedIndex].value;a.setState({site:t})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:+e.target.value,page:0})},a.state={data:[],openaddmodal:!1,isOpen:!1,opendeleteModal:!1,backdrop:!0,asset_id:"",asset_name:"",asset_brand:"",asset_owner_name:"",asset_owner_type:"",page:0,rowsPerPage:10,timestamp:Math.floor(Date.now()/1e3),siteData:[],site:"",id:"",delId:"",isSubmitted:!1,errors:void 0,done:!1,redirect:!1},a.timeConverter=a.timeConverter.bind(Object(h.a)(a)),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(_,"/"),{headers:t}).then((function(t){e.setState({done:!0}),200===t.status&&e.setState({data:t.data.results,asset_id:"",asset_name:"",asset_brand:"",asset_owner_name:"",asset_owner_type:"",redirect:!1})})).catch((function(t){if("Authentication credentials were not provided."!==t.response.data.detail)return t;localStorage.removeItem("accessToken"),e.setState({redirect:!0})})),P.a.get("".concat(b,":").concat(y,"/").concat(S,"/"),{headers:t}).then((function(t){e.setState({done:!0}),200===t.status&&e.setState({siteData:t.data.results.sort((function(e,t){return t.timestamp-e.timestamp}))})})).catch((function(e){return e}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleAddSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({isSubmitted:!0,errors:void 0});var a=Ga(this.state),n=a.isValid,l=a.errors;if(!n)return this.setState({errors:l,isSubmitted:!1}),!1;var r="asset_id="+this.state.asset_id+"&asset_name="+this.state.asset_name+"&asset_brand="+this.state.asset_brand+"&asset_owner_name="+this.state.asset_owner_name+"&asset_owner_type="+this.state.asset_owner_type+"&site="+this.state.site+"&timestamp="+this.state.timestamp;P.a.post("".concat(b,":").concat(y,"/").concat(_,"/"),r,{headers:Wa}).then((function(e){201===e.status&&(t.setState({isSubmitted:!0,openaddmodal:!1}),t.componentDidMount())})).catch((function(e){e.response.data.asset_id?t.setState({errors:"Oops! Asset ID already exists ",isSubmitted:!1}):e.response.data.asset_name&&t.setState({errors:"Oops! AssetName already exists ",isSubmitted:!1})}))}},{key:"toggleDeleteModal",value:function(e){var t=this.state.opendeleteModal;this.setState({opendeleteModal:!t,delId:e})}},{key:"timeConverter",value:function(e){var t=new Date(1e3*e),a=t.getFullYear(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()];return t.getDate()+" "+n+" "+a+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"render",value:function(){var e=this,t=this.state,a=t.asset_name,r=t.asset_id,s=t.asset_brand,o=t.asset_owner_name,c=t.asset_owner_type,i=t.isOpen,m=t.data,d=t.openaddmodal,u=t.page,p=t.rowsPerPage,g=t.opendeleteModal,h=t.site,f=t.siteData,E=t.errors,v=t.done;return this.state.redirect?l.a.createElement(we.a,{to:"/login"}):l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Ht,{className:"col-lg-12 boxtt"},l.a.createElement(Yt,null," Asset Management "),v?l.a.createElement(Kt,{className:"new-table"},l.a.createElement(Xt,null,l.a.createElement(qt,null,l.a.createElement($t,null,"Sr#"),l.a.createElement($t,null,"Asset Id"),l.a.createElement($t,null,"Asset Name"),l.a.createElement($t,null,"Site"),l.a.createElement($t,null,"Asset Brand"),l.a.createElement($t,null,"Owner Name"),l.a.createElement($t,null,"Owner Type"),l.a.createElement($t,null,"Created At"),l.a.createElement($t,null,"Actions"))),l.a.createElement(Qt,null,m.slice(u*p,u*p+p).map((function(t,a){var n=e.state.siteData[e.state.siteData.findIndex((function(e){return e.id===parseInt(t.site)}))];if(n)var r=n.site_name;var s=e.timeConverter(t.timestamp);return l.a.createElement(qt,{tabIndex:-1,key:a},l.a.createElement(ea,null,a+1+p*u),l.a.createElement(ea,null,t.asset_id),l.a.createElement(ea,null,t.asset_name),l.a.createElement(ea,null,r),l.a.createElement(ea,null,t.asset_brand),l.a.createElement(ea,null,t.asset_owner_name),l.a.createElement(ea,null,t.asset_owner_type),l.a.createElement(ea,null,s),l.a.createElement(ea,null,l.a.createElement(Ve.a,{style:{color:"white"},onClick:e.openEditModal.bind(e,t.id,t.asset_id,t.asset_name,t.asset_brand,t.asset_owner_name,t.asset_owner_type,t.site)},l.a.createElement(ba.a,{fontSize:"small"})),l.a.createElement(Ve.a,{style:{color:"white"},onClick:e.toggleDeleteModal.bind(e,t.id)},l.a.createElement(Sa.a,{fontSize:"small"})),l.a.createElement(xt.a,{isOpen:g,toggle:e.toggleDeleteModal,backdrop:!1},l.a.createElement(Ot.a,{toggle:function(){return e.setState({opendeleteModal:!1})}},"Delete Asset ",l.a.createElement(Oa.a,null)),l.a.createElement(Dt.a,null,"Are you want to delete this Asset ?"),l.a.createElement(At.a,null,l.a.createElement(kt.a,{type:"submit",size:"small",variant:"outlined",color:"secondary",onClick:function(){e.setState({opendeleteModal:!1}),e.removerow(t.id)}},l.a.createElement(Sa.a,null),"Delete"),l.a.createElement("span",null),l.a.createElement(kt.a,{type:"submit",size:"small",variant:"outlined",color:"primary",onClick:function(){return e.setState({opendeleteModal:!1})}},l.a.createElement(Na.a,null),"Cancel")))))})))):l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(_e,null)),m.length>10?l.a.createElement(fe.a,{style:{color:"white",backgroundColor:"#1b1b1b"},rowsPerPageOptions:[10,20,100],component:"div",count:m.length,rowsPerPage:p,page:u,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,labelRowsPerPage:"Assets Per Page"}):"",l.a.createElement(Zt,null)),l.a.createElement(xt.a,{isOpen:i,fade:!1,toggle:this.openEditModal,backdrop:!1},l.a.createElement(Ot.a,{toggle:function(){return e.setState({isOpen:!1})}},"Edit Assets"),l.a.createElement(Dt.a,null,l.a.createElement("form",{className:"form-group",onSubmit:this.handleEditSubmit},l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_id"},"Asset ID",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"asset_id",className:"form-control",value:r,disabled:!0})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_name"},"Asset Name",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"asset_name",className:"form-control",value:a,onChange:this.handleChange,placeholder:"Site Name"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_brand"},"Asset Brand",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"asset_brand",value:s,onChange:this.handleChange,placeholder:"Asset Brand"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_owner_name"},"Asset Owner Name",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"asset_owner_name",value:o,onChange:this.handleChange,placeholder:"Asset Owner Name "})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_owner_type"},"Asset Owner Type",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"asset_owner_type",value:c,onChange:this.handleChange,placeholder:"Asset Owner Type"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"site"},"Site",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("select",{className:"form-control",name:"site",id:"site",value:h,onChange:this.handleChangeSite,placeholder:"Site"},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Site"),f.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id}," ",e.site_name," ")})))),l.a.createElement("button",{className:"form-group col-lg-12 btn btn-info flexi",type:"submit",size:"large",variant:"contained",color:"primary","aria-label":"add"}," Done"),E?l.a.createElement("span",{style:{color:"red",margin:"auto",fontSize:"12px"}},E):""))),l.a.createElement(xt.a,{isOpen:d,toggle:this.openAddModal,backdrop:!1},l.a.createElement(Ot.a,{toggle:function(){return e.setState({openaddmodal:!1})}},"Add New Asset"),l.a.createElement(Dt.a,null,l.a.createElement("form",{className:"form-group"},l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",null,"Asset ID",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"asset_id",className:"form-control",value:r.trim(),onChange:this.handleChange,placeholder:"Asset Id"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_name"},"Asset Name",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",name:"asset_name",className:"form-control",value:a,onChange:this.handleChange,placeholder:"Asset Name"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_brand"},"Asset Brand",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"asset_brand",value:s,onChange:this.handleChange,placeholder:"Asset Brand"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_owner_name"},"Asset Owner Name",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"asset_owner_name",value:o,onChange:this.handleChange,placeholder:"Asset Owner Name "})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"asset_owner_type"},"Asset Owner Type",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("input",{type:"text",className:"form-control",name:"asset_owner_type",value:c,onChange:this.handleChange,placeholder:"Asset Owner Type"})),l.a.createElement(Ht,{className:"form-group"},l.a.createElement("label",{htmlFor:"site"},"Site",l.a.createElement("span",{className:"asterisk_input"})," "),l.a.createElement("select",{className:"form-control",name:"site",id:"site",value:h,onChange:this.handleChangeSite,placeholder:"Site"},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Site"),f.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id}," ",e.site_name," ")})))),l.a.createElement("button",{className:"form-group col-lg-12 btn btn-info flexi",onClick:this.handleAddSubmit.bind(this),type:"submit",size:"medium",variant:"contained",color:"primary","aria-label":"add"},"ADD ASSET"),E?l.a.createElement("span",{style:{color:"red",margin:"auto",fontSize:"12px"}},E):""))),l.a.createElement(ka.a,{style:{bottom:"10px",position:"fixed",right:"10px"},onClick:this.openAddModal,color:"secondary","aria-label":"add",title:"Add New Asset"},l.a.createElement(Ca.a,null)))}}]),t}(n.Component);function Ha(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(Ya,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(Ya,null)))}var Za=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.handleEmpty=function(){a.setState({siteValue:"",assetValue:"",fromDate:"",toDate:""})},a.handleChange=function(){a.handleEmpty();var e=document.getElementById("site"),t=e.options[e.selectedIndex].value;a.setState({siteValue:t,errors:void 0}),a.handleChangeAssets(t)},a.handleChangeAst=function(){var e=document.getElementById("asset"),t=e.options[e.selectedIndex].value;a.setState({assetValue:t,errors:void 0})},a.handleChangeDate=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(xe.a)({},t,n))},a.handleChangeAssets=function(e){var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(C).concat(e),{headers:t}).then((function(e){a._isMounted&&a.setState({assetsData:e.data})})).catch((function(e){return e}))},a.handleSubmit=function(e){e.preventDefault(),a.setState({isSubmitted:!0,errors:void 0});var t=function(e){var t={};return e.siteValue&&e.assetValue&&e.toDate&&e.fromDate?e.fromDate>e.toDate&&(t="Please insert valid date"):t="Please Fill All Fields Are Required!!",{errors:t,isValid:fa()(t)}}(a.state),n=t.isValid,l=t.errors;if(!n)return a.setState({errors:l,isSubmitted:!1}),!1;var r={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")},s=a.state,o=s.siteValue,c=s.assetValue,i=s.fromDate,m=s.toDate,d="site_id="+o+"&asset_id="+c+"&from_time="+new Date(i).getTime()/1e3+"&to_time="+(new Date(m).getTime()/1e3+86400);P.a.post("".concat(b,":").concat(y,"/").concat(D),d,{headers:r}).then((function(e){if(200===e.status){for(var t=[],n=0;n<e.data.length;n++)t.unshift({site_name:e.data[n][0],asset_name:e.data[n][1],event:e.data[n][2]});a.setState({reportData:t,isSubmitted:!0,errors:void 0,count:e.data.length})}})).catch((function(e){return e}))},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:+e.target.value,page:0})},a.state={siteData:[],assetsData:[],redirect:!1,siteValue:"",errors:"",isSubmitted:!1,assetValue:"",fromDate:"",toDate:"",reportData:void 0,rowsPerPage:15,page:0,count:0,done:!1},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.setState({done:!0});var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(S,"/"),{headers:t}).then((function(t){200===t.status&&e.setState({siteData:t.data.results,done:!1})})).catch((function(t){if("Authentication credentials were not provided."!==t.response.data.detail)return t;localStorage.removeItem("accessToken"),e.setState({redirect:!0})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.siteValue,a=e.assetValue,r=e.siteData,s=e.assetsData,o=e.fromDate,c=e.toDate,i=e.errors,m=e.reportData,d=e.page,u=e.rowsPerPage,p=e.count,g=e.done,h=r.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.site_name)})),f=s.map((function(e,t){return l.a.createElement("option",{key:t,value:e[10]},e[1])}));return this.state.redirect?l.a.createElement(we.a,{to:"/login"}):l.a.createElement(n.Fragment,null,l.a.createElement(Ht,{className:"col-lg-12",style:{marginTop:"2rem"}},l.a.createElement(Yt,{className:"flexi"},"Reports"),g?l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(_e,null)):l.a.createElement(Ht,{className:"col-lg-12",style:{marginTop:"2rem"}},l.a.createElement("form",{className:"form-group"},l.a.createElement(Ht,{className:"row"},l.a.createElement(Ht,{className:"col-lg-3"},l.a.createElement("label",null,"Select Site:"),l.a.createElement("select",{className:"form-control",id:"site",name:"site",onChange:this.handleChange,value:t},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Site"),h)),l.a.createElement(Ht,{className:"col-lg-3"},l.a.createElement("label",null,"Select Asset:"),t?0===s.length?l.a.createElement("select",{className:"form-control",id:"asset",name:"asset",disabled:!0,value:a},l.a.createElement("option",{className:"brave",defaultValue:!0},"No Asset Available"),f):l.a.createElement("select",{className:"form-control",id:"asset",name:"asset",onChange:this.handleChangeAst,value:a},l.a.createElement("option",{className:"brave",defaultValue:!0},"Select Asset"),f,l.a.createElement("option",{className:"brave",value:0},"All Assets")):l.a.createElement("select",{className:"form-control",id:"asset",name:"asset",disabled:!0,value:a},l.a.createElement("option",{className:"brave",defaultValue:!0},"Select Site First"),f)),l.a.createElement(Ht,{className:"col-lg-3"},l.a.createElement("label",null,"From Date:"),l.a.createElement("input",{className:"form-control",type:"date",name:"fromDate",onChange:this.handleChangeDate,value:o})),l.a.createElement(Ht,{className:"col-lg-3"},l.a.createElement("label",null,"To Date:"),l.a.createElement("input",{className:"form-control",type:"date",name:"toDate",onChange:this.handleChangeDate,value:c}))),l.a.createElement(Ht,{className:"col-lg-3 flexi"},l.a.createElement("button",{className:"form-control btn btn-info",id:"seli",onClick:this.handleSubmit},"Get Report")),i?l.a.createElement("p",{className:"flexi",style:{color:"red"}},i):"",l.a.createElement(Zt,null))),g?"":l.a.createElement(Ht,{className:"col-lg-12"},l.a.createElement(Kt,{className:"new-table"},l.a.createElement(Xt,null,l.a.createElement(qt,null,l.a.createElement($t,{style:{width:"10%"}},"Sr#"),l.a.createElement($t,{style:{width:"20%"}},"Site"),l.a.createElement($t,{style:{width:"20%"}},"Asset"),l.a.createElement($t,{style:{width:"50%"}},"Event"))),l.a.createElement(Qt,null,void 0!==m?m.slice(d*u,d*u+u).map((function(e,t){return l.a.createElement(qt,{key:t},l.a.createElement(ea,null,t+1+u*d),l.a.createElement(ea,null,e.site_name),l.a.createElement(ea,null,e.asset_name),l.a.createElement(ea,null,e.event))})):void 0)),void 0===m?l.a.createElement("p",{className:"flexi",style:{color:"red"}}," No Data Found"):0===p?l.a.createElement("p",{className:"flexi",style:{color:"red"}}," No Data Available Right Now"):"",p>15?l.a.createElement(fe.a,{style:{color:"white",backgroundColor:"#1b1b1b"},rowsPerPageOptions:[15,25,100],component:"div",count:p,rowsPerPage:u,page:d,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,labelRowsPerPage:"Alerts Per Page"}):"")))}}]),t}(n.Component);function Ka(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(Za,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(Za,null)," "))}var qa=new Date,Xa=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(g.a)(t).call(this,e)))._isMounted=!1,a.handleEmpty=function(){a.setState({fromDate:"",options:void 0})},a.handleChange=function(){a.handleEmpty();var e=document.getElementById("site"),t=e.options[e.selectedIndex].value;alert(t),a.setState({siteValue:t,errors:void 0})},a.handleChangeValue=function(e){var t=e.target.value;a.setState({options:t})},a.handleChangeDate=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(xe.a)({},t,n))},a.handleSubmit=function(e){e.preventDefault();var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("https://wts.cs-satms.com:8443/reporting?report_type=daily&site_id=44",{headers:t}).then((function(e){a.setState({reportingData:e.data,totalData:e.data.length})})).catch((function(e){return e}))},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:+e.target.value,page:0})},a.state={siteData:[],redirect:!1,siteValue:"",errors:"",isSubmitted:!1,fromDate:"",toValue:"",reportData:void 0,rowsPerPage:15,options:void 0,page:0,count:0,done:!1,week:void 0,month:void 0,daily:"daily",reportingData:[],totalData:void 0,optionPie:{labels:["Registered Undiscovered","Registered Discovered","UnAuthorized Entry","Stolen","In Transit"],colors:["#0992e1","#fd3550","#7f8281","#1e5aa0","#fb551d"],legend:{position:"bottom",labels:{colors:"white",useSeriesColors:!1}},responsive:[{breakpoint:void 0,options:{chart:{sparkline:{enabled:!0}}}}]},series:[{name:"Asset",data:[400,430,448,470,540]}],optionsBar:{plotOptions:{bar:{distributed:!0},dataLabels:{show:!1}},colors:["#0992e1","#fd3550","#7f8281","#1e5aa0","#fb551d"],legend:{position:"bottom"},responsive:[{breakpoint:void 0,options:{chart:{sparkline:{enabled:!0}}}}],chart:{foreColor:"#fff",animations:{speed:1600}},xaxis:{categories:["Registered Undiscovered","Registered Discovered","UnAuthorized Entry","Stolen","In Transit"]}}},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.setState({done:!0});var t={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+localStorage.getItem("accessToken")};P.a.get("".concat(b,":").concat(y,"/").concat(S,"/"),{headers:t}).then((function(t){200===t.status&&e.setState({siteData:t.data.results,done:!1})})).catch((function(t){if("Authentication credentials were not provided."!==t.response.data.detail)return t;localStorage.removeItem("accessToken"),e.setState({redirect:!0})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.siteValue,a=e.siteData,r=(e.fromDate,e.errors),s=e.reportData,o=e.page,c=e.rowsPerPage,i=e.count,m=e.done,d=e.month,u=e.week,p=e.reportingData,g=e.totalData,h=a.map((function(e,t){return l.a.createElement("option",{key:t,value:e.id},e.site_name)}));return g&&console.log(p),l.a.createElement(n.Fragment,null,l.a.createElement(Ht,{className:"col-lg-12",style:{marginTop:"2rem"}},l.a.createElement(Yt,{className:"flexi"},"WTS Reporting"),m?l.a.createElement(n.Fragment,null,l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(Zt,null),l.a.createElement(_e,null)):l.a.createElement(Ht,{className:"col-lg-12",style:{marginTop:"2rem"}},l.a.createElement("form",{className:"form-group"},l.a.createElement(Ht,{className:"row"},l.a.createElement(Ht,{className:"col-lg-2"},l.a.createElement("label",null,"Select Site:"),l.a.createElement("select",{className:"form-control",id:"site",name:"site",onChange:this.handleChange,value:t},l.a.createElement("option",{className:"brave",value:"",disabled:!0,defaultValue:!0},"Select Site"),h)),l.a.createElement(Ht,{className:"col-lg-2"},l.a.createElement("label",null," Date:"),l.a.createElement("input",{className:"form-control",id:"month",type:"month",name:"month",max:qa,onChange:this.handleChangeDate,value:d})),l.a.createElement(Ht,{className:"col-lg-2"},l.a.createElement("label",null," Date:"),l.a.createElement("input",{className:"form-control",id:"week",type:"week",name:"week",onChange:this.handleChangeDate,value:u})),l.a.createElement(Ht,{className:"col-lg-3"},l.a.createElement(Ht,{style:{marginTop:"2rem",display:"flex",justifyContent:"space-evenly"}},l.a.createElement("label",{className:"radio-inline"},l.a.createElement("input",{type:"radio",onChange:this.handleChangeValue,id:"daily",name:"type",value:1})," Daily"),l.a.createElement("label",{className:"radio-inline"},l.a.createElement("input",{type:"radio",onChange:this.handleChangeValue,id:"weekly",name:"type",value:7})," Weekly"),l.a.createElement("label",{className:"radio-inline"},l.a.createElement("input",{type:"radio",onChange:this.handleChangeValue,id:"monthly",name:"type",value:30})," Monthly"))),l.a.createElement(Ht,{className:"col-lg-3"},l.a.createElement("button",{className:"form-control btn btn-info",id:"seli",onClick:this.handleSubmit},"Generate Report"))),r?l.a.createElement("p",{className:"flexi",style:{color:"red"}},r):"",l.a.createElement(Zt,null))),l.a.createElement(Ht,{className:"col-lg-12"},l.a.createElement(Ht,{className:"row"},l.a.createElement(Ht,{className:"col-lg-5",style:{marginRight:0,height:"450px"}},l.a.createElement(T.a,{options:this.state.optionPie,series:[400,430,448,470,540],type:"pie",width:"100%",height:"100%"})),l.a.createElement(Ht,{className:"col-lg-7",id:"chart"},l.a.createElement(T.a,{options:this.state.optionsBar,series:this.state.series,type:"bar",height:416})))),l.a.createElement(Zt,null),m?"":l.a.createElement(Ht,{className:"col-lg-12"},l.a.createElement(Kt,{className:"new-table"},l.a.createElement(Xt,null,l.a.createElement(qt,null,l.a.createElement($t,{style:{width:"10%"}},"Sr#"),l.a.createElement($t,{style:{width:"20%"}},"Site"),l.a.createElement($t,{style:{width:"20%"}},"Asset"),l.a.createElement($t,{style:{width:"50%"}},"Event"))),l.a.createElement(Qt,null,void 0!==s?s.slice(o*c,o*c+c).map((function(e,t){return l.a.createElement(qt,{key:t},l.a.createElement(ea,null,t+1),l.a.createElement(ea,null,e.site_name),l.a.createElement(ea,null,e.asset_name),l.a.createElement(ea,null,e.event))})):void 0)),void 0===s?l.a.createElement("p",{className:"flexi",style:{color:"red"}}," No Data Found"):0===i?l.a.createElement("p",{className:"flexi",style:{color:"red"}}," No Data Available Right Now"):"",i>15?l.a.createElement(fe.a,{style:{color:"white",backgroundColor:"#1b1b1b"},rowsPerPageOptions:[15,25,100],component:"div",count:i,rowsPerPage:c,page:o,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,labelRowsPerPage:"Alerts Per Page"}):"")))}}]),t}(n.Component);function Qa(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement(Xa,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement(Xa,null)," "))}var $a=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:{position:"absolute",height:"50px",top:"50%",left:"50%",marginLeft:"-100px"}},l.a.createElement("h3",null,"404 Page Not Found"))}}]),t}(n.Component);function en(){var e=Wt(),t=l.a.useState(!1),a=Object(c.a)(t,2),n=a[0],r=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt,{state:{open:[n,r]}}),n?l.a.createElement(Ht,{className:e.content},l.a.createElement($a,null)):l.a.createElement(Ht,{className:e.contentShift},l.a.createElement($a,null)," "))}var tn=function(e){var t=e.component,a=Object(o.a)(e,["component"]);return l.a.createElement(we.b,Object.assign({},a,{render:function(e){return localStorage.getItem("accessToken")?l.a.createElement(t,e):l.a.createElement(we.a,{to:{pathname:"/login"}})}}))};var an=function(){return l.a.createElement(Ct.a,null,l.a.createElement(we.d,null,l.a.createElement(we.b,{path:"/login",component:Ea}),l.a.createElement(tn,{exact:!0,path:"/",component:aa}),l.a.createElement(tn,{exact:!0,path:"/devicemanagement",component:Pa}),l.a.createElement(tn,{exact:!0,path:"/sitemanagement",component:Ba}),l.a.createElement(tn,{exact:!0,path:"/alerts",component:Fa}),l.a.createElement(tn,{exact:!0,path:"/transferassets",component:Ja}),l.a.createElement(tn,{exact:!0,path:"/assetmanagement",component:Ha}),l.a.createElement(tn,{exact:!0,path:"/report",component:Ka}),l.a.createElement(tn,{exact:!0,path:"/reporting",component:Qa}),l.a.createElement(tn,{exact:!0,path:"/*",component:en})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(537),a(538),a(539);s.a.render(l.a.createElement(an,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[270,1,2]]]);
//# sourceMappingURL=main.438240e6.chunk.js.map